(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Navbar",{staticClass:"py-4"}),n("router-view")],1)},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-button-group",e._l(e.PATHS,(function(t){return n("b-button",{key:t.path,attrs:{variant:t.isCurrent?"warning":"light"},on:{click:function(n){return e.changeView(t)}}},[e._v(" "+e._s(t.name)+" ")])})),1)},s=[],c=n("b85c"),u=[{path:"/",name:"Home",isCurrent:!1},{path:"/books",name:"Książki",isCurrent:!1},{path:"/orders",name:"Zamówienia",isCurrent:!1},{path:"/invoices",name:"Faktury",isCurrent:!1},{path:"/management",name:"Management Panel",isCurrent:!1}],l={name:"Navbar",data:function(){return{PATHS:u}},created:function(){this.setActiveRoute()},methods:{changeView:function(e){var t,n=Object(c["a"])(this.PATHS);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.isCurrent=!1}}catch(o){n.e(o)}finally{n.f()}e.isCurrent=!0,this.$router.push(e.path),this.setActiveRoute()},setActiveRoute:function(){var e,t=Object(c["a"])(this.PATHS);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.path==this.$router.currentRoute.path){n.isCurrent=!0;break}}}catch(r){t.e(r)}finally{t.f()}}}},p=l,d=n("2877"),m=Object(d["a"])(p,i,s,!1,null,null,null),f=m.exports,h={name:"App",components:{Navbar:f},methods:{}},b=h,v=(n("034f"),Object(d["a"])(b,o,a,!1,null,null,null)),k=v.exports,g=n("8c4f"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"2"}}),n("b-col",{attrs:{cols:"8"}},[n("b-card",[n("h4",[e._v("Welcome to our Library!")]),n("hr"),n("h5",[e._v("In the "),n("i",[e._v("Książki")]),e._v(" tab You may find list of all the books available for purchase.")]),n("h5",[n("i",[e._v("Zamówienia")]),e._v(" tab contains all the orders placed in the previous tab, with some most important info about them.")]),n("h5",[e._v("In the last tab "),n("i",[e._v("Faktury")]),e._v(" You may find invoices for only the confirmed orders, regardless of whether they were paid or not.")])])],1),n("b-col",{attrs:{cols:"2"}})],1)],1)],1)},w=[],x={name:"Home"},C=x,_=Object(d["a"])(C,y,w,!1,null,null,null),O=_.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[e.booksLoaded?n("b-row",{staticClass:"py-4"},[n("b-col",{attrs:{cols:"1"}}),n("b-col",[e.booksLoaded?n("b-table",{attrs:{cols:"10",fields:e.fields,items:e.items,"show-empty":""},scopedSlots:e._u([{key:"cell(discount)",fn:function(t){return[e._v(" "+e._s(t.item.discount)+"% ")]}},{key:"cell(zakup)",fn:function(t){return[n("b-button",{attrs:{variant:"success",disabled:0==t.item.quantity},on:{click:function(n){return e.openBookReservationForm(t.item)}}},[e._v("Zamów")])]}},{key:"empty",fn:function(){return[n("h4",[n("b",[e._v("No books found")])])]},proxy:!0}],null,!1,1701375796)}):e._e()],1),n("b-col",{attrs:{cols:"1"}})],1):n("b-row",[n("b-col",{staticClass:"py-4",attrs:{cols:"12"}},[n("b-spinner",{staticStyle:{width:"3rem",height:"3rem"}})],1)],1),n("b-modal",{attrs:{id:"book-reservation-modal",size:"lg","hide-header":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.closeBookReservationForm()}}},[e._v(" Cancel ")]),n("b-button",{attrs:{variant:"success",disabled:!e.validForm()},on:{click:function(t){return e.beginOrder()}}},[e._v("Add to the basket!")])]}}])},[n("b-container",[n("h4",[e._v("Please specify the qunatity")]),n("hr"),n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Price per book")])]),e.bookToReserve?n("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.bookToReserve.unitPrice)+" zł ")]):e._e(),n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Total price")])]),e.bookToReserve&&e.form.quantity?n("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.bookToReserve.unitPrice*parseInt(e.form.quantity)+(null!=e.chosenShippingMethod?e.chosenShippingMethod.price:0))+" zł ")]):e._e()],1),n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Available discount")])]),e.bookToReserve?n("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s(e.bookToReserve.discount)+" % ")]):e._e(),n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Price after discount")])]),e.bookToReserve?n("b-col",{attrs:{cols:"3"}},[e._v(" "+e._s((e.bookToReserve.unitPrice*parseInt(e.form.quantity)*(1-e.bookToReserve.discount/100)+(null!=e.chosenShippingMethod?e.chosenShippingMethod.price:0)).toFixed(2))+" zł ")]):e._e()],1),n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Quantity")])]),n("b-col",{attrs:{cols:"6"}},[n("b-form-input",{attrs:{type:"number",placeholder:"1"},model:{value:e.form.quantity,callback:function(t){e.$set(e.form,"quantity",t)},expression:"form.quantity"}})],1)],1),n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Shipping")])]),n("b-col",{attrs:{cols:"6"}},[n("b-form-select",{attrs:{options:e.shippingMethods},model:{value:e.chosenShippingMethod,callback:function(t){e.chosenShippingMethod=t},expression:"chosenShippingMethod"}})],1)],1)],1)],1)],1)},F=[],S=n("1da1"),j=(n("e9c4"),n("96cf"),n("99af"),n("b0c0"),n("bc3a").default),I="http://localhost:8080/api";function T(){return P.apply(this,arguments)}function P(){return P=Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Fetching all books from ".concat(I)),e.next=3,j.get("".concat(I,"/warehouse/books"),{params:{}}).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}function $(){return B.apply(this,arguments)}function B(){return B=Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Fetching price for books from ".concat(I)),e.next=3,j.get("".concat(I,"/sales/books"),{params:{}}).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function M(){return q.apply(this,arguments)}function q(){return q=Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Fetching discounts for books from ".concat(I)),e.next=3,j.get("".concat(I,"/marketing/books"),{params:{}}).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function D(){return N.apply(this,arguments)}function N(){return N=Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Fetching all shipping methods from ".concat(I)),e.next=3,j.get("".concat(I,"/shipping/methods"),{params:{}}).then((function(e){return e}));case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function L(e){return H.apply(this,arguments)}function H(){return H=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Creating order for book ".concat(t.book.name," ").concat(I)),e.next=3,j.post("".concat(I,"/contact/orders/create"),{BookID:t.book.id,BookName:t.book.name,BookQuantity:t.quantity,BookPrice:t.book.unitPrice,BookDiscount:t.book.discount,DeliveryMethod:t.deliveryMethod.method,DeliveryPrice:t.deliveryMethod.price},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function J(e){return A.apply(this,arguments)}function A(){return A=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Creating book ".concat(t.name," ").concat(I)),e.next=3,j.post("".concat(I,"/warehouse/books/create"),{name:t.name,price:parseInt(t.price),quantity:parseInt(t.quantity),discount:parseInt(t.discount)},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function z(e){return E.apply(this,arguments)}function E(){return E=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Creating shipping method ".concat(t.name," ").concat(I)),e.next=3,j.post("".concat(I,"/shipping/methods"),{Method:t.name,Price:parseInt(t.price)},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function Y(e){return V.apply(this,arguments)}function V(){return V=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Deleting shipping method ".concat(t.name," ").concat(I)),e.next=3,j.delete("".concat(I,"/shipping/methods"),{data:{Method:t.name},headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}function Q(e){return Z.apply(this,arguments)}function Z(){return Z=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Updating book ".concat(t.name," in warehouse ").concat(I)),e.next=3,j.put("".concat(I,"/warehouse/books"),{ID:t.id,name:t.name,quantity:parseInt(t.quantity)},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function K(e){return U.apply(this,arguments)}function U(){return U=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Updating price of book ".concat(t.name," ").concat(I)),e.next=3,j.put("".concat(I,"/sales/books"),{BookID:t.id,BookPrice:parseInt(t.unitPrice)},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function W(e){return G.apply(this,arguments)}function G(){return G=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Updating discount of book ".concat(t.name," ").concat(I)),e.next=3,j.put("".concat(I,"/marketing/books"),{BookID:t.id,BookDiscount:parseInt(t.discount)},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function X(e){return ee.apply(this,arguments)}function ee(){return ee=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Confirming order ".concat(t.id," ").concat(I)),e.next=3,j.post("".concat(I,"/contact/orders/").concat(t.id,"/confirm"),{},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Cancelling order ".concat(t.id," ").concat(I)),e.next=3,j.post("".concat(I,"/contact/orders/").concat(t.id,"/cancel"),{},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}function re(e){return oe.apply(this,arguments)}function oe(){return oe=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Fetching order ".concat(t," status from ").concat(I)),e.next=3,j.get("".concat(I,"/contact/orders/").concat(t,"/status"),{params:{}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}function ae(e){return ie.apply(this,arguments)}function ie(){return ie=Object(S["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Paying for invoice ".concat(t.id," ").concat(I)),e.next=3,j.post("".concat(I,"/accounting/invoices/").concat(t.id,"/pay"),{},{headers:{"Content-Type":"application/json"}}).then((function(e){return e}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}var se=["name","quantity","unitPrice","discount","zakup"],ce={name:"Books",data:function(){return{books:[],items:[],fields:se,booksLoaded:!1,form:{quantity:null},bookToReserve:null,order:null,shippingMethods:null,chosenShippingMethod:null}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.parseBooks();case 2:return t.next=4,e.parseShippingMethods();case 4:case"end":return t.stop()}}),t)})))()},methods:{loadBooks:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:n=t.sent,e.books=n;case 4:case"end":return t.stop()}}),t)})))()},loadPrices:function(){return Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},loadDiscounts:function(){return Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},parseBooks:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,i,s,u,l,p,d,m,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.booksLoaded=!1,t.next=3,e.loadBooks();case 3:return e.items=[],t.next=6,e.loadPrices();case 6:return n=t.sent,t.next=9,e.loadDiscounts();case 9:r=t.sent,o=Object(c["a"])(e.books),t.prev=11,o.s();case 13:if((a=o.n()).done){t.next=55;break}i=a.value,s=JSON.parse(JSON.stringify(i)),u=Object(c["a"])(n),t.prev=17,u.s();case 19:if((l=u.n()).done){t.next=26;break}if(p=l.value,p.id!=i.id){t.next=24;break}return s.unitPrice=p.price,t.abrupt("break",26);case 24:t.next=19;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](17),u.e(t.t0);case 31:return t.prev=31,u.f(),t.finish(31);case 34:d=Object(c["a"])(r),t.prev=35,d.s();case 37:if((m=d.n()).done){t.next=44;break}if(f=m.value,f.id!=i.id){t.next=42;break}return s.discount=f.discount,t.abrupt("break",44);case 42:t.next=37;break;case 44:t.next=49;break;case 46:t.prev=46,t.t1=t["catch"](35),d.e(t.t1);case 49:return t.prev=49,d.f(),t.finish(49);case 52:e.items.push(s);case 53:t.next=13;break;case 55:t.next=60;break;case 57:t.prev=57,t.t2=t["catch"](11),o.e(t.t2);case 60:return t.prev=60,o.f(),t.finish(60);case 63:e.booksLoaded=!0;case 64:case"end":return t.stop()}}),t,null,[[11,57,60,63],[17,28,31,34],[35,46,49,52]])})))()},parseShippingMethods:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:n=t.sent,e.shippingMethods=[{value:null,text:"Choose shipping method"}],r=Object(c["a"])(n);try{for(r.s();!(o=r.n()).done;)a=o.value,i=JSON.parse(JSON.stringify(a)),e.shippingMethods.push({value:{method:i.methodValue,price:i.price},text:i.methodValue})}catch(s){r.e(s)}finally{r.f()}case 6:case"end":return t.stop()}}),t)})))()},openBookReservationForm:function(e){this.bookToReserve=e,this.form.quantity=1,this.chosenShippingMethod=null,this.$bvModal.show("book-reservation-modal")},closeBookReservationForm:function(){this.$bvModal.hide("book-reservation-modal")},validForm:function(){return!(this.form["quantity"]<=0||this.form["quantity"]>this.bookToReserve.quantity||null==this.chosenShippingMethod)},beginOrder:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.order={book:e.bookToReserve,quantity:parseInt(e.form.quantity),deliveryMethod:e.chosenShippingMethod},t.next=3,L(e.order);case 3:n=t.sent,200===n.status?(e.order.orderId=n.data.orderID,e.$orders.unshift(e.order),e.$bvToast.toast("Successfully placed order!",{title:"Order confirmation",autoHideDelay:5e3,appendToast:!0})):e.$bvToast.toast("Failed to place order!",{title:"Order confirmation",autoHideDelay:5e3,appendToast:!0}),e.closeBookReservationForm();case 6:case"end":return t.stop()}}),t)})))()}}},ue=ce,le=Object(d["a"])(ue,R,F,!1,null,"efd0613a",null),pe=le.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[e.ordersLoaded?n("b-row",{staticClass:"py-4"},[n("b-col",{attrs:{cols:"1"}}),n("b-col",[e.ordersLoaded?n("b-table",{attrs:{cols:"10",fields:e.fields,items:e.items,"show-empty":""},scopedSlots:e._u([{key:"cell(id)",fn:function(t){return[e._v(" "+e._s(t.item.id)+" ")]}},{key:"cell(bookName)",fn:function(t){return[e._v(" "+e._s(t.item.bookName)+" ")]}},{key:"cell(quantity)",fn:function(t){return[e._v(" "+e._s(t.item.quantity)+" ")]}},{key:"cell(totalPrice)",fn:function(t){return[e._v(" "+e._s(t.item.totalPrice)+" ")]}},{key:"cell(cancel)",fn:function(t){return[n("b-button",{attrs:{variant:"danger",disabled:"Shipped to customer"==t.item.status||"Canceled"==t.item.status||"Awaiting payment"==t.item.status},on:{click:function(n){return e.openOrderCancellationForm(t.item)}}},[e._v("Anuluj")])]}},{key:"cell(confirm)",fn:function(t){return[n("b-button",{attrs:{variant:"success",disabled:"Shipped to customer"==t.item.status||"Canceled"==t.item.status||"Awaiting payment"==t.item.status},on:{click:function(n){return e.openOrderConfirmationForm(t.item)}}},[e._v("Potwierdź")])]}},{key:"empty",fn:function(){return[n("h4",[n("b",[e._v("No orders found")])])]},proxy:!0}],null,!1,2814963869)}):e._e()],1),n("b-col",{attrs:{cols:"1"}})],1):n("b-row",[n("b-col",{staticClass:"py-4",attrs:{cols:"12"}},[n("b-spinner",{staticStyle:{width:"3rem",height:"3rem"}})],1)],1),n("b-modal",{attrs:{id:"confirm-order-modal",size:"md","hide-header":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.closeOrderConfirmationForm()}}},[e._v(" Cancel ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.confirmOrder()}}},[e._v("Confirm order")])]}}])},[n("b-container",[n("h4",[e._v("Confirm Your order")])])],1),n("b-modal",{attrs:{id:"cancel-order-modal",size:"md","hide-header":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.closeOrderCancellationForm()}}},[e._v(" No, I want to keep it ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.cancelOrder()}}},[e._v("Cancel order")])]}}])},[n("h4",[e._v("Are You sure You want to cancel Your order?")])])],1)},me=[],fe=["ID","bookName","quantity","totalPrice","status","cancel","confirm"],he={name:"Orders",data:function(){return{orders:[],items:[],fields:fe,ordersLoaded:!1,orderToConfirm:null}},mounted:function(){this.parseOrders()},methods:{parseOrders:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.ordersLoaded=!1,e.orders=e.$orders,e.items=[],n=Object(c["a"])(e.orders),t.prev=4,n.s();case 6:if((r=n.n()).done){t.next=15;break}return o=r.value,t.next=10,re(o.orderId);case 10:a=t.sent,i={id:o.orderId,bookName:o.book.name,bookId:o.book.id,quantity:o.quantity,totalPrice:o.quantity*o.book.unitPrice,unitPrice:o.book.unitPrice,discount:o.book.discount,status:a.status},e.items.push(JSON.parse(JSON.stringify(i)));case 13:t.next=6;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:e.ordersLoaded=!0,e.watchForStatusChange();case 25:case"end":return t.stop()}}),t,null,[[4,17,20,23]])})))()},watchForStatusChange:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:setInterval((function(){var t,n=Object(c["a"])(e.orders);try{var r=function(){var n=t.value;re(n.orderId).then((function(t){var r=e.orders.indexOf(n);e.items[r].status=t.status,"Canceled"==e.items[r].status&&e.orderToConfirm.id==n.orderId&&(e.closeOrderConfirmationForm(),e.closeOrderCancellationForm())}))};for(n.s();!(t=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}}),3e3);case 1:case"end":return t.stop()}}),t)})))()},openOrderConfirmationForm:function(e){this.orderToConfirm=e,this.$bvModal.show("confirm-order-modal")},closeOrderConfirmationForm:function(){this.$bvModal.hide("confirm-order-modal")},openOrderCancellationForm:function(e){this.orderToConfirm=e,this.$bvModal.show("cancel-order-modal")},closeOrderCancellationForm:function(){this.$bvModal.hide("cancel-order-modal")},confirmOrder:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,X(e.orderToConfirm);case 2:n=t.sent,200===n.status?(e.$confirmedOrders.push(e.orderToConfirm),e.$bvToast.toast("Successfully confirmed order!",{title:"Order confirmation",autoHideDelay:5e3,appendToast:!0})):e.$bvToast.toast("Failed to confirm order!",{title:"Order confirmation",autoHideDelay:5e3,appendToast:!0}),e.closeOrderConfirmationForm();case 5:case"end":return t.stop()}}),t)})))()},cancelOrder:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,te(e.orderToConfirm);case 2:n=t.sent,200===n.status?(re(e.orderToConfirm.id).then((function(t){var n=e.orders.indexOf(e.orderToConfirm);e.items[n].status=t.status})),e.$bvToast.toast("Successfully cancelled order!",{title:"Order cancellation",autoHideDelay:5e3,appendToast:!0})):e.$bvToast.toast("Failed to cancel order!",{title:"Order cancellation",autoHideDelay:5e3,appendToast:!0}),e.closeOrderCancellationForm();case 5:case"end":return t.stop()}}),t)})))()}}},be=he,ve=Object(d["a"])(be,de,me,!1,null,"04c3ad2c",null),ke=ve.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[e.invoicesLoaded?n("b-row",{staticClass:"py-4"},[n("b-col",{attrs:{cols:"1"}}),n("b-col",[e.invoicesLoaded?n("b-table",{attrs:{cols:"10",fields:e.fields,items:e.items,"show-empty":""},scopedSlots:e._u([{key:"cell(id)",fn:function(t){return[e._v(" "+e._s(t.item.id)+" ")]}},{key:"cell(bookName)",fn:function(t){return[e._v(" "+e._s(t.item.bookName)+" ")]}},{key:"cell(quantity)",fn:function(t){return[e._v(" "+e._s(t.item.quantity)+" ")]}},{key:"cell(totalPrice)",fn:function(t){return[e._v(" "+e._s(t.item.totalPrice)+" ")]}},{key:"cell(confirm)",fn:function(t){return[n("b-button",{attrs:{variant:"success",disabled:"Shipped to customer"==t.item.status||"Canceled"==t.item.status},on:{click:function(n){return e.openInvoiceConfirmationForm(t.item)}}},[e._v("Potwierdź")])]}},{key:"empty",fn:function(){return[n("h4",[n("b",[e._v("No invoices found")])])]},proxy:!0}],null,!1,1749785639)}):e._e()],1),n("b-col",{attrs:{cols:"1"}})],1):n("b-row",[n("b-col",{staticClass:"py-4",attrs:{cols:"12"}},[n("b-spinner",{staticStyle:{width:"3rem",height:"3rem"}})],1)],1),n("b-modal",{attrs:{id:"pay-invoice-modal",size:"md","hide-header":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.closeInvoiceConfirmationForm()}}},[e._v(" Cancel ")]),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.payInvoice()}}},[e._v("Pay invoice")])]}}])},[n("b-container",[n("h4",[e._v("Confirm Your invoice")])])],1)],1)},ye=[],we=(n("7db0"),n("d3b7"),["ID","bookName","quantity","totalPrice","status","confirm"]),xe={name:"Invoices",data:function(){return{invoices:[],items:[],fields:we,invoicesLoaded:!1,invoiceToPay:null,currentPrice:null,currentPriceLoaded:!1,currentDiscountLoaded:!1}},mounted:function(){this.parseInvoices()},methods:{parseInvoices:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.invoicesLoaded=!1,e.invoices=e.$confirmedOrders,e.items=[],n=Object(c["a"])(e.invoices),t.prev=4,n.s();case 6:if((r=n.n()).done){t.next=15;break}return o=r.value,t.next=10,re(o.id);case 10:a=t.sent,i={id:o.id,bookName:o.bookName,bookId:o.bookId,quantity:o.quantity,totalPrice:o.quantity*o.unitPrice,unitPrice:o.unitPrice,discount:o.discount,status:a.status},e.items.push(JSON.parse(JSON.stringify(i)));case 13:t.next=6;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:e.invoicesLoaded=!0,e.watchForStatusChange();case 25:case"end":return t.stop()}}),t,null,[[4,17,20,23]])})))()},watchForStatusChange:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:setInterval((function(){var t,n=Object(c["a"])(e.invoices);try{var r=function(){var n=t.value;re(n.id).then((function(t){var r=e.invoices.indexOf(n);e.items[r].status=t.status,"Canceled"==e.items[r].status&&e.invoiceToPay.id==n.id&&e.closeInvoiceConfirmationForm()}))};for(n.s();!(t=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}}),3e3);case 1:case"end":return t.stop()}}),t)})))()},openInvoiceConfirmationForm:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.invoiceToPay=e,n.next=3,t.loadCurrentPrice(e.bookId);case 3:return n.next=5,t.loadCurrentDiscount(e.bookId);case 5:t.$bvModal.show("pay-invoice-modal");case 6:case"end":return n.stop()}}),n)})))()},closeInvoiceConfirmationForm:function(){this.$bvModal.hide("pay-invoice-modal")},loadCurrentPrice:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.currentPriceLoaded=!1,n.next=3,$();case 3:r=n.sent,t.currentPrice=r.find((function(t){return t.id===e})).price,t.currentPriceLoaded=!0;case 6:case"end":return n.stop()}}),n)})))()},loadCurrentDiscount:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.currentDiscountLoaded=!1,n.next=3,M();case 3:r=n.sent,t.currentDiscount=r.find((function(t){return t.id===e})).discount,t.currentDiscountLoaded=!0;case 6:case"end":return n.stop()}}),n)})))()},payInvoice:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ae(e.invoiceToPay);case 2:n=t.sent,200===n.status?(e.$paidOrders.push(e.invoiceToPay),re(e.invoiceToPay.id).then((function(t){var n=e.invoices.indexOf(e.invoiceToPay);e.items[n].status=t.status})),e.$bvToast.toast("Invoice successfully paid!",{title:"Inovoice payment",autoHideDelay:5e3,appendToast:!0})):e.$bvToast.toast("Failed to pay invoice!",{title:"Invoice payment",autoHideDelay:5e3,appendToast:!0}),e.closeInvoiceConfirmationForm();case 5:case"end":return t.stop()}}),t)})))()}}},Ce=xe,_e=Object(d["a"])(Ce,ge,ye,!1,null,"21b2fe84",null),Oe=_e.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-tabs",[n("b-tab",{attrs:{title:"Books"}},[n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"8"}}),n("b-col",{attrs:{cols:"4"}},[n("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.openBookCreationForm()}}},[e._v(" Add book ")])],1)],1),e.booksLoaded?n("b-row",{staticClass:"py-4"},[n("b-col",{attrs:{cols:"1"}}),n("b-col",[e.booksLoaded?n("b-table",{attrs:{cols:"10",fields:e.fields,items:e.bookItems,"show-empty":""},scopedSlots:e._u([{key:"cell(id)",fn:function(t){return[e._v(" "+e._s(t.item.id)+" ")]}},{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(t.item.name)+" ")]}},{key:"cell(details)",fn:function(t){return[n("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:t.detailsShowing?"warning":"success"},on:{click:t.toggleDetails}},[e._v(" "+e._s(t.detailsShowing?"Hide":"Show")+" ")])]}},{key:"empty",fn:function(){return[n("h4",[n("b",[e._v("No books found")])])]},proxy:!0},{key:"row-details",fn:function(t){return[n("b-card",[n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Price:")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{state:t.item.unitPrice==e.bookBaseItems.find((function(e){return e.id==t.item.id})).unitPrice,type:"number"},model:{value:t.item.unitPrice,callback:function(n){e.$set(t.item,"unitPrice",n)},expression:"row.item.unitPrice"}})],1),n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Discount:")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"number",state:t.item.discount==e.bookBaseItems.find((function(e){return e.id==t.item.id})).discount},model:{value:t.item.discount,callback:function(n){e.$set(t.item,"discount",n)},expression:"row.item.discount"}})],1)],1),n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Quantity:")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"number",state:t.item.quantity==e.bookBaseItems.find((function(e){return e.id==t.item.id})).quantity},model:{value:t.item.quantity,callback:function(n){e.$set(t.item,"quantity",n)},expression:"row.item.quantity"}})],1),n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Name:")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"text",state:t.item.name==e.bookBaseItems.find((function(e){return e.id==t.item.id})).name},model:{value:t.item.name,callback:function(n){e.$set(t.item,"name",n)},expression:"row.item.name"}})],1)],1),n("b-row",[n("b-col",{attrs:{cols:"9"}}),n("b-col",{attrs:{cols:"3"}},[n("b-button",{staticClass:"mt-4",attrs:{size:"md",variant:"info"},on:{click:function(n){return e.saveBookChanges(t.item)}}},[e._v("Save changes")])],1)],1)],1)]}}],null,!1,1252226680)}):e._e()],1),n("b-col",{attrs:{cols:"1"}})],1):n("b-row",[n("b-col",{staticClass:"py-4",attrs:{cols:"12"}},[n("b-spinner",{staticStyle:{width:"3rem",height:"3rem"}})],1)],1),n("b-modal",{attrs:{id:"book-creation-modal",size:"lg","hide-header":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.closeBookCreationForm()}}},[e._v(" Cancel ")]),n("b-button",{attrs:{variant:"success",disabled:!e.validBookForm()},on:{click:function(t){return e.createBook()}}},[e._v("Create book")])]}}])},[n("b-container",[n("h4",[e._v("Create new book form")]),n("hr"),n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Name")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"text"},model:{value:e.bookCreationForm.name,callback:function(t){e.$set(e.bookCreationForm,"name",t)},expression:"bookCreationForm.name"}})],1),n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Quantity")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"number"},model:{value:e.bookCreationForm.quantity,callback:function(t){e.$set(e.bookCreationForm,"quantity",t)},expression:"bookCreationForm.quantity"}})],1)],1),n("b-row",{staticClass:"pt-4"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Price")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"number"},model:{value:e.bookCreationForm.price,callback:function(t){e.$set(e.bookCreationForm,"price",t)},expression:"bookCreationForm.price"}})],1),n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Discount")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"number"},model:{value:e.bookCreationForm.discount,callback:function(t){e.$set(e.bookCreationForm,"discount",t)},expression:"bookCreationForm.discount"}})],1)],1)],1)],1)],1),n("b-tab",{attrs:{title:"Shipping"}},[n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"8"}}),n("b-col",{attrs:{cols:"4"}},[n("b-button",{attrs:{variant:"warning"},on:{click:function(t){return e.openShippingCreationForm()}}},[e._v(" Add shipping ")])],1)],1),e.shippingMethodsLoaded?n("b-row",{staticClass:"py-4"},[n("b-col",{attrs:{cols:"1"}}),n("b-col",[e.shippingMethodsLoaded?n("b-table",{attrs:{cols:"10",fields:e.shippingFields,items:e.shippingItems,"show-empty":""},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(t.item.name)+" ")]}},{key:"cell(price)",fn:function(t){return[e._v(" "+e._s(t.item.price)+" ")]}},{key:"cell(delete)",fn:function(t){return[n("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"danger"},on:{click:function(n){return e.deleteShipping(t.item)}}},[e._v(" Delete ")])]}}],null,!1,2379147718)}):e._e()],1),n("b-col",{attrs:{cols:"1"}})],1):e._e(),n("b-modal",{attrs:{id:"shipping-creation-modal",size:"lg","hide-header":!0},scopedSlots:e._u([{key:"modal-footer",fn:function(t){return[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.closeShippingCreationForm()}}},[e._v(" Cancel ")]),n("b-button",{attrs:{variant:"success",disabled:!e.validShippingForm()},on:{click:function(t){return e.createShipping()}}},[e._v("Add shipping")])]}}])},[n("b-container",[n("h4",[e._v("Create new shipping form")]),n("hr"),n("b-row",{staticClass:"pt-2"},[n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Name")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"text"},model:{value:e.shippingCreationForm.name,callback:function(t){e.$set(e.shippingCreationForm,"name",t)},expression:"shippingCreationForm.name"}})],1),n("b-col",{attrs:{cols:"3"}},[n("b",[e._v("Price")])]),n("b-col",{attrs:{cols:"3"}},[n("b-form-input",{attrs:{type:"number"},model:{value:e.shippingCreationForm.price,callback:function(t){e.$set(e.shippingCreationForm,"price",t)},expression:"shippingCreationForm.price"}})],1)],1)],1)],1)],1)],1)],1)},Fe=[],Se=(n("4de4"),["ID","name","details"]),je=["Name","price","delete"],Ie={name:"ManagementPanel",data:function(){return{books:[],shippingMethods:[],bookItems:[],bookBaseItems:[],shippingItems:[],fields:Se,shippingFields:je,booksLoaded:!1,shippingMethodsLoaded:!1,form:{quantity:null,price:null,discount:null,name:null},bookCreationForm:{name:null,quantity:null,discount:null,price:null},shippingCreationForm:{name:null,price:null},bookToReserve:null}},mounted:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.parseBooks();case 2:return t.next=4,e.parseShippingMethods();case 4:case"end":return t.stop()}}),t)})))()},methods:{loadBooks:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T();case 2:n=t.sent,e.books=n;case 4:case"end":return t.stop()}}),t)})))()},loadPrices:function(){return Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},loadShippingPrices:function(){return Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(void 0)();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},loadDiscounts:function(){return Object(S["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},parseBooks:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a,i,s,u,l,p,d,m,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.booksLoaded=!1,t.next=3,e.loadBooks();case 3:return e.bookItems=[],t.next=6,e.loadPrices();case 6:return n=t.sent,t.next=9,e.loadDiscounts();case 9:r=t.sent,o=Object(c["a"])(e.books),t.prev=11,o.s();case 13:if((a=o.n()).done){t.next=55;break}i=a.value,s=JSON.parse(JSON.stringify(i)),u=Object(c["a"])(n),t.prev=17,u.s();case 19:if((l=u.n()).done){t.next=26;break}if(p=l.value,p.id!=i.id){t.next=24;break}return s.unitPrice=p.price,t.abrupt("break",26);case 24:t.next=19;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](17),u.e(t.t0);case 31:return t.prev=31,u.f(),t.finish(31);case 34:d=Object(c["a"])(r),t.prev=35,d.s();case 37:if((m=d.n()).done){t.next=44;break}if(f=m.value,f.id!=i.id){t.next=42;break}return s.discount=f.discount,t.abrupt("break",44);case 42:t.next=37;break;case 44:t.next=49;break;case 46:t.prev=46,t.t1=t["catch"](35),d.e(t.t1);case 49:return t.prev=49,d.f(),t.finish(49);case 52:e.bookItems.push(s);case 53:t.next=13;break;case 55:t.next=60;break;case 57:t.prev=57,t.t2=t["catch"](11),o.e(t.t2);case 60:return t.prev=60,o.f(),t.finish(60);case 63:e.bookBaseItems=JSON.parse(JSON.stringify(e.bookItems)),e.booksLoaded=!0;case 65:case"end":return t.stop()}}),t,null,[[11,57,60,63],[17,28,31,34],[35,46,49,52]])})))()},parseShippingMethods:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.shippingMethodsLoaded=!0,t.next=3,D();case 3:e.shippingMethods=t.sent,e.shippingItems=[],n=Object(c["a"])(e.shippingMethods);try{for(n.s();!(r=n.n()).done;)o=r.value,a=JSON.parse(JSON.stringify(o)),e.shippingItems.push({name:a.methodValue,price:a.price})}catch(i){n.e(i)}finally{n.f()}e.shippingMethodsLoaded=!0;case 8:case"end":return t.stop()}}),t)})))()},validBookForm:function(){return!(""===this.bookCreationForm["name"]||""===this.bookCreationForm["quantity"]||""===this.bookCreationForm["discount"]||""===this.bookCreationForm["price"]||parseInt(this.bookCreationForm["quantity"])<=0||parseInt(this.bookCreationForm["discount"])<0||parseInt(this.bookCreationForm["discount"])>100||parseInt(this.bookCreationForm["price"])<0)},validShippingForm:function(){return!(""==this.bookCreationForm["name"]||this.bookCreationForm["price"]<0)},saveBookChanges:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var r,o,a,i,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.bookBaseItems.indexOf(t.bookBaseItems.find((function(t){return t.id==e.id}))),o=e.price!=t.bookBaseItems.find((function(t){return t.id==e.id})).price,a=e.quantity!=t.bookBaseItems.find((function(t){return t.id==e.id})).quantity,i=e.discount!=t.bookBaseItems.find((function(t){return t.id==e.id})).discount,s=e.name!=t.bookBaseItems.find((function(t){return t.id==e.id})).name,c=null,!o){n.next=10;break}return n.next=9,K(e);case 9:c=n.sent;case 10:if(!a&&!s){n.next=14;break}return n.next=13,Q(e);case 13:c=n.sent;case 14:if(!i){n.next=18;break}return n.next=17,W(e);case 17:c=n.sent;case 18:200===c.status?t.$bvToast.toast("Changes saved correctly!",{title:"Book changes",autoHideDelay:5e3,appendToast:!0}):t.$bvToast.toast("Failed to save changes!",{title:"Book changes",autoHideDelay:5e3,appendToast:!0}),t.bookBaseItems[r]=e,t.bookItems=JSON.parse(JSON.stringify(t.bookItems));case 21:case"end":return n.stop()}}),n)})))()},openBookCreationForm:function(){this.bookCreationForm.name="DefaultName",this.bookCreationForm.price=49,this.bookCreationForm.quantity=1,this.bookCreationForm.discount=0,this.$bvModal.show("book-creation-modal")},closeBookCreationForm:function(){this.$bvModal.hide("book-creation-modal")},createBook:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J(e.bookCreationForm);case 2:n=t.sent,200===n.status?e.$bvToast.toast("Book created correctly!",{title:"Book changes",autoHideDelay:5e3,appendToast:!0}):e.$bvToast.toast("Failed to create book!",{title:"Book changes",autoHideDelay:5e3,appendToast:!0}),e.parseBooks(),e.closeBookCreationForm();case 6:case"end":return t.stop()}}),t)})))()},openShippingCreationForm:function(){this.shippingCreationForm.name="ShippingName",this.shippingCreationForm.price=14,this.$bvModal.show("shipping-creation-modal")},closeShippingCreationForm:function(){this.$bvModal.hide("shipping-creation-modal")},createShipping:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z(e.shippingCreationForm);case 2:return n=t.sent,200===n.status?e.$bvToast.toast("Created shipping method correctly!",{title:"Shipping changes",autoHideDelay:5e3,appendToast:!0}):e.$bvToast.toast("Failed to create shipping method!",{title:"Shipping changes",autoHideDelay:5e3,appendToast:!0}),t.next=6,e.parseShippingMethods();case 6:e.closeShippingCreationForm(),e.shippingItems=JSON.parse(JSON.stringify(e.shippingItems));case 8:case"end":return t.stop()}}),t)})))()},deleteShipping:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Y(e);case 2:return r=n.sent,200===r.status?t.$bvToast.toast("Deleted shipping method correctly!",{title:"Shipping changes",autoHideDelay:5e3,appendToast:!0}):t.$bvToast.toast("Failed to delete shipping method!",{title:"Shipping changes",autoHideDelay:5e3,appendToast:!0}),n.next=6,t.parseShippingMethods();case 6:t.shippingItems=t.shippingItems.filter((function(t){return t.name!=e.name})),t.shippingItems=JSON.parse(JSON.stringify(t.shippingItems));case 8:case"end":return n.stop()}}),n)})))()}}},Te=Ie,Pe=Object(d["a"])(Te,Re,Fe,!1,null,"09a5c432",null),$e=Pe.exports;r["default"].use(g["a"]);var Be=[{path:"/",name:"Home",component:O},{path:"/books",name:"Książki",component:pe},{path:"/orders",name:"Zamówienia",component:ke},{path:"/invoices",name:"Faktury",component:Oe},{path:"/management",name:"Management",component:$e}],Me=new g["a"]({routes:Be}),qe=Me,De=n("5f5b");n("4989"),n("f9e3"),n("2dd8");r["default"].config.productionTip=!1,r["default"].use(De["a"]),r["default"].prototype.$orders=[],r["default"].prototype.$confirmedOrders=[],r["default"].prototype.$paidOrders=[],new r["default"]({router:qe,render:function(e){return e(k)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.151012fb.js.map